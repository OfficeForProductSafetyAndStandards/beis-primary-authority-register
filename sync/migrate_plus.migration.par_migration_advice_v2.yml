uuid: 85884bf2-1cc4-4fb5-8384-df11ffe59a09
langcode: en
status: true
dependencies:
  enforced:
    module:
      - par_migration
      - par_migration_scripts
_core:
  default_config_hash: vMo-8iczo0ytCyIwC50Sqsc1KnnWiGVc657NBK1yMbQ
id: par_migration_advice_v2
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - MS-SQL
migration_group: PAR2v2
label: 'PAR Migration of advice'
source:
  plugin: par_migration_advice
process:
  document_type:
    plugin: default_value
    default_value: Advice
  id: advice_id
  type:
    plugin: default_value
    default_value: advice
  uid:
    plugin: default_value
    default_value: 1
  advice_type: advice_type
  notes: notes
  visible_authority:
    plugin: static_map
    source: authority_visible
    map:
      'Y': true
      'N': false
      'null': false
  visible_coordinator:
    plugin: static_map
    source: coordinator_visible
    map:
      'Y': true
      'N': false
      'null': false
  visible_business:
    plugin: static_map
    source: business_visible
    map:
      'Y': true
      'N': false
      'null': false
  field_regulatory_function:
    -
      plugin: skip_on_empty
      method: process
      source: regulatory_functions
    -
      plugin: iterator
      process:
        target_id:
          plugin: migration_lookup
          migration: par_migration_regulatory_functions
          source: target_id
          no_stub: true
  document:
    -
      plugin: migration_lookup
      migration: par_migration_advice_documents_v2
      no_stub: true
      source:
        document_id: null
        owning_object_type: '@document_type'
        owning_object_id: advice_id
    -
      plugin: skip_on_empty
      method: process
destination:
  plugin: 'entity:par_data_advice'
migration_dependencies:
  required:
    - par_migration_advice_documents_v2
