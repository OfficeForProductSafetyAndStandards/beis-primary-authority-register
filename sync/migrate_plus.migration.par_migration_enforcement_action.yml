uuid: 18361d1c-9821-4590-b153-050ef8005f39
langcode: en
status: true
dependencies:
  enforced:
    module:
      - par_migration
      - par_migration_scripts
_core:
  default_config_hash: 3LqL9j2Z08UlQjd7-vdNJe4lhATOdQEdPYUyACjfnLc
id: par_migration_enforcement_action
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - MS-SQL
migration_group: PAR2v2
label: 'PAR Migration of enforcement action'
source:
  plugin: par_migration_enforcement_action
process:
  id: enforcement_action_id
  type:
    plugin: default_value
    default_value: enforcement_action
  uid:
    plugin: default_value
    default_value: 1
  title:
    plugin: skip_on_empty
    method: process
    source: title
  details:
    plugin: skip_on_empty
    method: process
    source: details
  enforcement_action_status:
    plugin: static_map
    source: ea_status
    default_value: null
    map:
      Deferred: deferred
      'No Further Action': no_action
      'Ready To Serve': ready
      Served: served
      Unknown: null
      N/A: null
  enforcement_action_notes:
    plugin: skip_on_empty
    method: process
    source: ea_notes
  primary_authority_status:
    plugin: static_map
    source: pa_status
    default_value: approved
    map:
      Approved: approved
      Blocked: blocked
      Referred: referred
  primary_authority_notes:
    plugin: skip_on_empty
    method: process
    source: pa_notes
  field_regulatory_function:
    -
      plugin: migration_lookup
      migration: par_migration_regulatory_functions
      no_stub: true
      source:
        regulatory_function_id: regulatory_function_id
    -
      plugin: skip_on_empty
      method: process
  document:
    -
      plugin: migration_lookup
      migration: par_migration_enforcement_action_documents
      no_stub: true
      source:
        document_id: null
        owning_object_id: enforcement_action_id
    -
      plugin: skip_on_empty
      method: row
destination:
  plugin: 'entity:par_data_enforcement_action'
migration_dependencies:
  required:
    - par_migration_regulatory_functions
    - par_migration_advice
    - par_migration_enforcement_action_documents
