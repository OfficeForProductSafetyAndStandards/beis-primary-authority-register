services:
  # Modified cache backends.
  cache.backend.par_cache.database:
    class: Drupal\par_cache\Cache\DatabaseBackendFactory
    arguments: ['@database', '@cache_tags.invalidator.checksum', '@settings']
  cache.backend.par_cache.redis:
    class: Drupal\redis\Cache\CacheBackendFactory
    arguments: ['@par_cache.redis_factory', '@cache_tags.invalidator.checksum', '@serialization.phpserialize']
  par_cache.redis_factory:
    class: Drupal\par_cache\Cache\RedisClientFactory

  # Cache bin for par_data relationships.
  cache.par_data:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin, default_backend: cache.backend.par_cache.database  }
    factory: cache_factory:get
    arguments: [par_data]

  # Cache bin for par_flows form data.
  cache.par_flows:
    class: Drupal\Core\Cache\CacheBackendInterface
    tags:
      - { name: cache.bin, default_backend: cache.backend.par_cache.database }
    factory: cache_factory:get
    arguments: [ par_flows ]

